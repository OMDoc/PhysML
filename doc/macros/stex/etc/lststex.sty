\RequirePackage{listings}

\lstdefinelanguage{pseudocode}
{morekeywords={procedure,end,loop,return,to,local,Value,fail,if,for,else},
  morecomment=[s]{(*}{*)},
  morecomment=[s][\sl]{<}{>}
}

\lstdefinelanguage[sTeX]{TeX}[LaTeX]{TeX}%
  {moretexcs={[2]defin,twindef,atwindef,definalt,twindefalt,atwindefalt,definiendum,
      importmodule,usemodule,symdef,
      defi,defii,defiii,adefi,adefii,adefiii,
      trefi,trefii,trefiii,atrefi,atrefii,atrefiii,
      termref,sref},
   morekeywords={module,definition,axiom,assertion,omtext,
     inputref,
     sproof,spfstep,spfcases,spfcase,justification,premise}}

\lstset{columns=fullflexible,basicstyle=\ttfamily}
\lstset{frame=none,numbers=none,lineskip=-.7ex}%,aboveskip=-1em,belowskip=-2em}
\lstset{keywordstyle={[2]\color{red}},keywordstyle={[3]\color{blue}}}
\lstset{keywordstyle={[4]\color{green}},keywordstyle={[5]\color{magenta}}}
\lstset{emphstyle={[2]\color{red}},emphstyle={[3]\color{blue}}}
\lstset{emphstyle={[4]\color{green}},emphstyle={[5]\color{magenta}}}
\lstset{commentstyle=\color{brown}}
\newcommand{\lstkeycolor}[2]{\ifcase#1\textbf{#1}\or\red{#2}\or\blue{#2}\or\green{#2}\or\magenta{#2}\fi}
\define@key{stexlisting}{id}{\def\sref@id{#1}}
\define@key{stexlisting}{id}{\def\stexlst@id{#1}}

% LocalWords:  lstdefinelanguage morekeywords morecomment moretexcs defin sref
% LocalWords:  twindef atwindef definalt twindefalt atwindefalt termref lstset
% LocalWords:  basicstyle scriptsize fullflexible lineskip aboveskip belowskip
% LocalWords:  keywordstyle keywordstyle newcommand lstkeycolor ifcase textbf
% LocalWords:  stexlisting stexlst sproof spfstep symdef spfcases spfcase tt
% LocalWords:  texcsstyle emphstyle emphstyle ttfamily
